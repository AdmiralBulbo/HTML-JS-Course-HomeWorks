.container {
    display: flex;
    flex-flow: row wrap;
}

.item {
    margin: 5px;
    flex: 1;
    box-shadow: 1px 2px 4px rgba(0, 0, 0, .5);
}

.red {
    height: 100px;
    background-color: red;
    flex: 2;
}

.orange {
    height: 100px;
    background-color: orange;
    flex: 3;
}

.green {
    background-color: green;
    flex: 1 100%;
    height: 300px;
}

.brown {
    background-color: brown;
    height: 150px;
}

.blue {
    background-color: blue;
    height: 150px;
}

.purple {
    background-color: purple;
    height: 150px;
}

@media all and (max-width: 600px) {
    .container > * { flex: 1 100%;}
    .blue, .purple {flex: 0;}
}

@media all and (max-width: 800px) {
    .purple {flex: 0;}
}